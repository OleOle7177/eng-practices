# Скорость проведения ревью


## Почему код-ревью должно быть сделано быстро? {#why}

В Google мы стараемся оптимизировать скорость, с которой команда разработчиков совместно делает продукт, в отличии от оптимизации скорости, с которой каждый отдельный разработчик пишет код. Скорость работы разработчика конечно важна, но скорость работы команды в целом важнее.

Что происходит, когда код-ревью делается медленно:

*   **Продуктивность команды снижается.** Конечно, разработчики, не получившие ревью вовремя, просто начинают делать другую работу. Вместе с тем, релизы багфиксов и нового функционала задерживаются на дни, недели и месяцы, по мере того, как изменения ждут ревью и повторного ревью.
*   **Разработчики недовольны процессом ревью.** Если ревьюер отвечает раз в несколько дней и каждый раз запрашивает мажорные изменения, разработчикам становится сложно работать. Часто это выражается в жалобах на строгость ревьюера. Однако, если ревьюер стабильно запрашивает _одинаковые_ значительные изменения, которые улучшают кодовую базу, и при этом реагирует на обновления CL быстро, жалобы уходят. Большинство жалоб на процесс проведения ревью исчезает, когда оно становится быстрым.
*   **Негативное влияние на состояние кодовой базы.** Когда ревью медленное, давление на команду растет и часто пропускается код ненадлежащего качества. Медленные ревью также затрудняют рефакторинг, удаление лишнего кода и другие улучшения в CL.


## Насколько быстрыми должны быть ревью? {#fast}

Если вы не находитесь в процессе сфокусированной работы над какой-либо задачей, то вы должны сделать ревью сразу, как только его у вас запросили.

**Один рабочий день - это максимальное время ответа на запрос ревью** (по сути, с этого вы должны начать свое следующее рабочее утро, если не ответили за текущий день).

Если следовать приведенным правилам, то обычный CL пройдет несколько раундов ревью (если потребуется) в течение одного рабочего дня.


## Скорость vs. прерывание {#interruption}

Есть ситауация, когда ревью может подождать: **если вы находитесь в середине сфокусированной работы над какой-либо задачей, например, пишете код, то не стоит отвлекаться на проведение ревью сразу же.** Исследования показывают, что разработчику требуется достаточно много времени чтобы обратно погрузиться в работу, после того как его отвлекли. Таким образом, ваш быстрый отклик на ревью, в конечно счете стоит команде дороже, чем недолгое ожидание другого инженера.

Удачные моменты для проведения ревью могут быть связаны с перерывами в вашей работе: время после завершения текущей задачи, возвращение с кофепоинта, встречи, обеда и тд.


## Отвечайте быстро {#responses}

Когда мы говорим о скорости проведения код-ревью, то имеем в виду, прежде всего, время ответов, а не то, сколько времени в целом требуется CL чтобы пройти все стадии и быть закоммиченным. Суммарное время всего ревью также должно быть небольшим, но намного важнее именно быстрые ответы на каждый отдельный запрос.

Иногда сам процесс ревью занимает продолжительное время, в таких случаях быстрые отклики по ходу значительно меняют впечатления разработчиков о том, что процесс медленный.

Если вы слишком заняты, чтобы провести ревью полностью, вы можете дать знать разработчику, когда сможете заняться его CL или порекомендовать других ревьюеров, которые смогут ответить быстрее. Также вы можете оставить [первые обзорные комментарии на код](navigate.md). Но помните, даже ответы такого рода не должны прерывать вашу работу по написанию кода - лучше ответить во время перерыва.

**Очень важно, чтобы ревьюеры уделяли ревью столько времени, чтобы они могли с уверенностью сказать что код соответствует [нашим стандартам](standard.md).** Вместе с тем, в идеале, ответы все равно должны оставаться [быстрыми](#fast).


## Разные часовые пояса {#tz}

Если человек, чей код вы ревьюите, находится в другом часовом поясе, постарайтесь дать ответ до того времени, когда он уйдет с работы. В противном случае будьте уверены, что ревью сделано до начала его следующего рабочего дня.


## LGTM (looks good to me = с моей точки зрения все хорошо) с комментариями {#lgtm-with-comments}

В некоторых ситуациях, для того чтобы ускорить ревью, вы можете ставить аппрув даже если к CL остались комментарии. Это может быть сделано в следующих случаях:

*   Ревьюер уверен, что разработчик исправит код в соответствии с комментариями.
*   Остались минорные изменения, которые делать необязательно.

LGTM с комментариями особенно важны, когда разработчик и ревьюер находятся в разных часовых поясах и разработчик может ждать целый день просто чтобы получить "LGTM, Approval".


## Большие CL {#large}

Если к вам на ревью приходит большой по объему CL и вы не уверены что у вас достаточно времени, вашей обычной реакцией может быть просьба [разбить CL на несколько более мелких CL](../developer/small-cls.md), зависящих друг от друга. Обычно это возможно и является большой помощью ревьюерам, хоть и требует дополнительных усилий от разработчика.

Если CL не может быть разбит на более мелкие части и у вас недостаточно времени, чтобы провести полное ревью, напишите несколько комментариев по общей архитектуре CL, возможно там есть моменты, которые разработчик сможет доработать уже сейчас. Одна из ваших задач, как ревьюера, давать разработчикам быстрый ответ и не блокировать их дальнейшую работу.


## Прогресс в код-ревью {#time}

Если вы будете следовать всем перечисленным правилам и будете достаточно строги в ревью, то обнаружите, что с каждым разом весь процесс занимает все меньше и меньше времени. Разработчики понимают, что необходимо учитывать при написании кода и отправляют вам хорошие CL с первого раза. Ревьюеры учатся отвечать быстро и не замедлять процесс. Однако, **никогда не идите на компромиссы, когда дело касается [стандартов написания кода](standard.md) и качества** - при кажущейся выгоде сделать все побыстрее сейчас, вы усугубите ситуацию на дистанции.


## Экстренные ситуации

Иногда возникают [экстренные ситуации](../emergencies.md) , когда CL должен пройти весь процесс ревью очень быстро. В таких случаях стандарты качества могут быть снижены. Для того, чтобы понять какие ситуации являются экстренными, смотрите главу ["Экстренные ситуации"](../emergencies.md#what).

Далее: [Как писать комментарии в ревью](comments.md)
